<!DOCTYPE html>
<!--
Copyright (C) 2016 maxim

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
<html>
    <head>
        <meta charset="UTF-8">
        <title>GPS brainstorm tool</title>
        <link rel="stylesheet" type="text/css" href="slick/slick.css"/>
        <link rel="stylesheet" type="text/css" href="slick/slick-theme.css"/>
        <link rel="stylesheet" type="text/css" href="style.css"/>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ngStorage/0.3.6/ngStorage.min.js"></script>


        
    </head>
    <body>
        
        <div class="single-item" ng-app="app" ng-controller="ctrl">
            <div>              
                <question></question>
                <input ng-model="$storage.question" placeholder="Vul hier de vraag in...">
            </div>
            <div>
                <div class="ideas" id="redIdeas">
                    <h2>RODE IDEEËN</h2>
                    <h3>korte termijn: snel realiseerbaar</h3>
                    <idea-list type="red"></idea-list>
                </div>
                <div class="ideas" id="yellowIdeas">
                    <h2>GELE IDEEËN</h2>
                    <h3>lange termijn: haalbaarheid moet onderzocht worden</h3>
                    <idea-list type="yellow"></idea-list>
                </div>
            </div>
            <div>
                                <h1>Einde</h1>
            </div>
        </div>
        
        <script type="text/javascript" src="//code.jquery.com/jquery-3.1.1.min.js"></script>
        <script type="text/javascript" src="slick/slick.min.js"></script>
        
        <script type="text/javascript">
          $(document).ready(function(){
            var initialSlide = localStorage.slide;
            console.log(initialSlide);
            $('.single-item').slick({
                dots: true,
                infinite: false,
                initialSlide: JSON.parse(initialSlide)
            });
        });
        // On before slide change
        $('.single-item').on('afterChange', function(event, slick, currentSlide, nextSlide){
          localStorage.slide = currentSlide;
        });
        $("body").keydown(function(e){
            // left arrow
            if ((e.keyCode || e.which) === 37)
            {   
                $('.single-item').slick('slickPrev');
            }
            // right arrow
            if ((e.keyCode || e.which) === 39)
            {
                $('.single-item').slick('slickNext');  
            }   
        });
        </script>
        
        <script type="text/javascript">
            var app = angular.module('app', ['ngStorage']);

            app.controller('ctrl', function($scope,$localStorage) {
                $scope.$storage = $localStorage.$default({
                    "question": "",
                    "ideas": JSON.parse('{"yellow":[{"q":"geelidee1","c":"3"},{"q":"geelidee2","c":"2"},{"q":"geelidee3","c":"4"}],"red":[]}')
                });
            });
            
            app.directive('question', function() {
                return {
                  template: '<h1>{{$storage.question}}</h1>'
                };
            });
            
            app.directive('ideaList', function(){
                return {
                    template: function(tElem, tAttrs){
                        return '<ul>'+
                        '<li ng-repeat="idea in $storage.ideas.'+tAttrs.type+' | orderBy:\'c\':true">'+
                          '{{ idea.q + \'(\' + idea.c + \')\'}}'+
                        '</li>'+
                    '</ul>';
                    }
                };
            });
            
            </script>
        
        
       
    </body>
</html>
